{
  "messages": [
    {
      "role": "system",
      "content": "あなたは IdeaMark 形式のドキュメントを正しく生成するアシスタントです。  \n出力は **完全な IdeaMark 文書（`.ideamark.md`）1本のみ** としてください。\n\n### 出力制約\n\n1. 文書冒頭に fenced YAML ヘッダを置くこと。\n2. 各 Section は以下の構造を守ること：\n\n```\n## 見出しタイトル\n\n```yaml\nsection_id: SEC-XXX\nanchorage:\n  view: <ViewType>\n  phase: <PhaseType>\n  domain: [flowmark, ai, guides]\n```\n\n本文（Markdown）\n```\n\n3. `section_id` は一意であること。\n4. `anchorage.domain` に必ず `flowmark` と `guides` を含めること。\n5. selector で抽出できるように view/phase を明確に分離すること：\n   - `view: background`\n   - `view: rules`\n   - `view: examples`\n   - `view: constraints`\n   - `view: hypothesis`（必要に応じて）\n6. 文末に最低限の registry YAML（`sections` と `structure.sections`）を置くこと。\n7. 不要な説明文（「以下が生成結果です」など）は出力しない。\n\n---"
    },
    {
      "role": "user",
      "content": "## TASK\n\nFlowMark が `flowmark describe` 実行時に参照する  \n**FlowMark Authoring Guides（IdeaMark形式）** を生成せよ。\n\n### 目的\n\n- FlowMark の describe 雛形品質を安定化する\n- 「過剰生成」「不要拡張」「README化」などを抑制する\n- selector で機械的に抽出できる構造を持つ\n\n### 必須セクション\n\n最低限、以下の view を持つこと：\n\n1. **background**\n   - FlowMark と IdeaMark の責務分離\n   - FlowMark は“describe雛形生成器”、IdeaMark は“構造化資産”\n2. **rules**\n   - describe が守るべき記述原則（構造優先、過剰説明抑制、ユーザー要求の尊重）\n3. **constraints**\n   - 出力サイズ上限、README的文章の禁止、describe段階での実装コード生成禁止\n4. **examples**\n   - 良い指示例 / 悪い指示例\n5. （任意）hypothesis\n   - profile拡張の扱いなど将来方針\n\n### phase の使い分け\n\n- 原則説明 → `phase: exploration`\n- ルール確定 → `phase: decision`\n- 将来仮説 → `phase: hypothesis`\n\n---\n\n## MATERIALS\n\n以下は参考資料である。  \n内容をそのまま転載せず、FlowMark Guides として再構成せよ。\n\n---\n\n```yaml\nideamark_provenance:\n  sources:\n    - path: \"/home/akki/ドキュメント/work/ideamark-cli/docs/dev/v0.1.0/examples/fixtures/fixture.min.ideamark.md\"\n      doc_id: \"fixture.min.001\"\n      section_id: \"SEC-001\"\n      range:\n        start_line: 19\n        end_line: 28\n    - path: \"/home/akki/ドキュメント/work/ideamark-cli/docs/dev/v0.1.0/examples/fixtures/fixture.min.ideamark.md\"\n      doc_id: \"fixture.min.001\"\n      section_id: \"SEC-002\"\n      range:\n        start_line: 31\n        end_line: 40\n```\n\n```yaml\nsection_id: SEC-001\nanchorage:\n  view: background\n  phase: exploration\n  domain: [flowmark, ai, guides]\n```\n\n背景セクション本文。\n\n```yaml\nsection_id: SEC-002\nanchorage:\n  view: rules\n  phase: decision\n  domain: [flowmark, ai, guides]\n```\n\nルールセクション本文。\n\n---\n\n## OUTPUT FORMAT\n\n最終出力は **IdeaMark文書そのもののみ** とする。  \nコードブロック外に余計な文章を書いてはならない。"
    }
  ],
  "meta": {
    "goal": "guides.flowmark",
    "select": "view=background view=rules",
    "with_provenance": true
  }
}
